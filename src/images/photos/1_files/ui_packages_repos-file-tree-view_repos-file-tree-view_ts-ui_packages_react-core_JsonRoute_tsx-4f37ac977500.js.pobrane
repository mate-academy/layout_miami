"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_react-core_JsonRoute_tsx"],{67142:(e,t,n)=>{n.d(t,{n:()=>r});function r({appendQuery:e,retainScrollPosition:t,returnTarget:n}){window.dispatchEvent(new CustomEvent("blackbird_monolith_append_and_focus_input",{detail:{appendQuery:e,retainScrollPosition:t,returnTarget:n}}))}},65906:(e,t,n)=>{function r(e){return a(e)[0]}function a(e){let t=[];for(let n of function(){try{return document.cookie.split(";")}catch{return[]}}()){let[r,a]=n.trim().split("=");e===r&&void 0!==a&&t.push({key:r,value:a})}return t}function o(e,t,n=null,r=!1,a="lax"){let o=document.domain;if(null==o)throw Error("Unable to get document domain");o.endsWith(".github.com")&&(o="github.com");let i="https:"===location.protocol?"; secure":"",l=n?`; expires=${n}`:"";!1===r&&(o=`.${o}`);try{document.cookie=`${e}=${t}; path=/; domain=${o}${l}${i}; samesite=${a}`}catch{}}function i(e,t=!1){let n=document.domain;if(null==n)throw Error("Unable to get document domain");n.endsWith(".github.com")&&(n="github.com");let r=new Date(new Date().getTime()-1).toUTCString(),a="https:"===location.protocol?"; secure":"",o=`; expires=${r}`;!1===t&&(n=`.${n}`);try{document.cookie=`${e}=''; path=/; domain=${n}${o}${a}`}catch{}}n.d(t,{$1:()=>a,d8:()=>o,ej:()=>r,kT:()=>i})},96728:(e,t,n)=>{n.d(t,{lp:()=>p,c:()=>A,YP:()=>eo,T:()=>M,hO:()=>ep});var r=n(48055),a=n(78178),o=n(65197),i=n(98805),l=n(51350),s=n(85529),d=n(88216),c=n(58081);let u=c.forwardRef(({expanded:e,onToggleExpanded:t,className:n,ariaControls:c,textAreaId:u},m)=>{let{toggleTreeShortcut:p}=(0,i.bx)(),[h]=(0,l.D)(()=>!1,!0,[]);return(0,r.jsxs)(r.Fragment,{children:[(!e||h)&&(0,r.jsx)(d.r,{"aria-label":"Expand file tree",leadingVisual:s.ArrowLeftIcon,"data-hotkey":p.hotkey,"data-testid":"expand-file-tree-button-mobile",ref:m,onClick:t,variant:"invisible",sx:{color:"fg.muted",px:2,display:"none","@media screen and (max-width: 768px)":{display:"block"}},children:"Files"}),(0,r.jsx)(o.V,{dataHotkey:p.hotkey,className:n,expanded:e,alignment:"left",ariaLabel:e?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:c,ref:m,onToggleExpanded:t,sx:{height:"32px",position:"relative","@media screen and (max-width: 768px)":{display:!e||h?"none":"flex"}}}),(0,r.jsx)(a.P,{buttonFocusId:u,buttonHotkey:p.hotkey,onButtonClick:t,onlyAddHotkeyScopeButton:!0})]})});u.displayName="ExpandFileTreeButton";var m=n(23710);function p({inputRef:e,onFindFilesShortcut:t,textAreaId:n}){let{sendRepoKeyDownEvent:o}=(0,m.a)(),{findFilesShortcut:l}=(0,i.bx)();return(0,r.jsx)(a.P,{buttonFocusId:n,buttonHotkey:l.hotkey,onButtonClick:()=>{t?.(),e?.current?.focus(),o("GO_TO_FILE")}})}try{p.displayName||(p.displayName="FindFilesShortcut")}catch{}var h=n(88808),f=n(77832),x=n(34400),y=n(80580),g=n(49632),w=n(37055),b=n(10409),v=n(11270),C=n(10351),j=n(33760),k=n(4675),R=n(13275),I=n(42483),S=n(75308),E=n(65379),N=n(50919),T=n(98833),F=n(81248),$=n(8677),O=n(12464);let _=(0,c.createContext)({knownFolders:new Map,dispatchKnownFolders:()=>{}});try{_.displayName||(_.displayName="FileTreeContext")}catch{}var D=n(45194),P=n(22336),L=n(10491),W=n(79993),Z=n(47682),B=n(74121);let z=c.createContext({});function A({refreshTree:e,children:t}){return(0,r.jsxs)(z.Provider,{value:e,children:[" ",t," "]})}function M(){return c.useContext(z)}try{z.displayName||(z.displayName="RefreshTreeContext")}catch{}try{A.displayName||(A.displayName="RefreshTreeProvider")}catch{}var G=n(70697);function U(e,t,n){e.data.name=e.data.name.slice(e.data.name.lastIndexOf("/")+1,e.data.name.length);let r=t.name.slice(0,t.name.lastIndexOf("/")),a=r.indexOf("/")>-1,o={path:t.path.slice(0,t.path.lastIndexOf("/")),contentType:t.contentType,name:r,hasSimplifiedPath:a},i={items:[e],data:o};return(n.set(o.path,i),a)?U(i,{...o},n):i}function H(e,t,n){if(!e)return{newRootItems:n,rootItemsUpdated:!1};let r=!!e[""]&&V("",t,n,e[""].items);for(let n of Object.keys(e).sort())if(n){let r=t.get(n);r&&(V(n,t,r.items,e[n].items),r.data.totalCount=e[n].totalCount)}return{newRootItems:n,rootItemsUpdated:r}}function V(e,t,n,r){let a=!1;for(let o of r){let r=e?`${e}/${o.name}`:o.name;if(!t.get(r)){let e={items:[],data:{...o}};if(t.set(r,e),o.hasSimplifiedPath){let r=U(e,o,t),i=n.findIndex(e=>e.data.path===r.data.path);-1!==i?r.items.length>n[i].items.length&&(n[i]=r,a=!0):n.push(r)}else n.push(e)}}return a}function K({isActive:e,file:t,onItemSelected:n,getItemUrl:a,selectedItemRef:o,navigate:i,onRenderRow:l}){let{sendRepoClickEvent:d}=(0,m.a)(),u=c.useRef(null),p=(0,L.a)({focusRowRef:u,mouseRowRef:u}),h="submodule"===t.data.contentType,f=c.useCallback(r=>{h?(r.preventDefault(),t.data.submoduleUrl&&(window.location.href=t.data.submoduleUrl)):r.metaKey||r.ctrlKey||1===r.button?(window.open(a(t.data),"_blank"),r.preventDefault()):e?r.preventDefault():(n?.(),d("FILES_TREE.ITEM",{item_path:t.data.path}),i(a(t.data)),r.stopPropagation())},[t.data,a,e,h,i,n,d]);return l?.(),(0,r.jsxs)(Z.L.Item,{ref:u,onSelect:f,current:e,id:`${t.data.path}-item`,containIntrinsicSize:e?void 0:"auto 2rem",children:[(0,r.jsx)(Z.L.LeadingVisual,{children:h?(0,r.jsx)(s.FileSubmoduleIcon,{}):(0,r.jsx)(s.FileIcon,{})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{ref:o,style:{color:h?"var(--fgColor-accent, var(--color-accent-fg))":void 0},children:t.data.name}),p&&(0,r.jsx)(P.u,{"data-testid":`${t.data.name}-item-tooltip`,id:`${t.data.name}-item-tooltip`,contentRef:u,"aria-label":t.data.name,open:!0,direction:"ne"})]})]})}let q=c.memo(K);function Y({directory:e,isActive:t,isAncestorOfActive:n,leadingPath:a="",onItemSelected:o,dispatchKnownFolders:i,getItemUrl:l,getFetchUrl:s,selectedItemRef:d,navigate:u,onRenderRow:p,navigateOnClick:h=!0}){let[f,x]=(0,c.useState)(n),{sendRepoClickEvent:y}=(0,m.a)(),g=c.useRef(null),w=c.useRef(null),b=(0,L.a)({focusRowRef:w,mouseRowRef:g}),[v,C,j,R,I,S,E]=function(e,t,n){let[r,a]=c.useState(e.items),[o,i]=c.useState(e.data.totalCount||0),[l,s]=c.useState(!1),[d,u]=c.useState(!1),{safeSetTimeout:m}=(0,G.Z)();c.useEffect(()=>{a(e.items)},[e.items]),c.useEffect(()=>{void 0!==e.data.totalCount&&i(e.data.totalCount)},[e.data.totalCount]);let p=c.useCallback(()=>{u(!1)},[]),h=c.useCallback((e,t)=>{let n=e||[...r];a(n.slice(0,100)),m(()=>{a(n),void 0!==t&&i(t)},1)},[r,m]);return[c.useCallback(async()=>{let r=n(e.data),o=new Map;u(!1),s(!0);let l=Date.now(),d=await (0,k.v5)(`${r}?noancestors=1`);try{if(d.ok){let n=await d.json(),r=n.payload.tree.items.map(e=>{let t={items:[],data:{...e},autoExpand:"directory"===e.contentType&&1===n.payload.tree.items.length};return(o.set(e.path,t),e.hasSimplifiedPath)?U(t,e,o):t});t({type:"add",folders:o,processingTime:Date.now()-l}),e.items=r,e.data.totalCount=n.payload.tree.totalCount,r.length>100?h(r,n.payload.tree.totalCount):(a(r),i(n.payload.tree.totalCount))}else u(!0)}catch{u(!0)}s(!1)},[n,e,t,h]),h,r,l,d,p,o]}(e,i,s),N=E-j.length,T=a?`${a}/`:"",F=c.useCallback(r=>{!r||f||R||I||(e.items.length>100?C():0!==e.items.length||t||n||v()),r!==f&&x(r)},[f,R,I,e.items.length,t,n,C,v]),$=c.useCallback(n=>{n.metaKey||n.ctrlKey||1===n.button&&h?(window.open(l(e.data),"_blank"),n.preventDefault()):t?n.preventDefault():(o?.(),y("FILES_TREE.ITEM",{item_path:e.data.path}),h?u(l(e.data)):F?.(!f),n.stopPropagation())},[e.data,l,t,f,u,h,o,F,y]);c.useEffect(()=>{n&&!f&&F?.(!0)},[n]),c.useEffect(()=>{0===e.items.length&&f?F?.(!1):!f&&e.autoExpand&&F?.(!0)},[e.items.length]);let O=c.useCallback(e=>{d&&t&&d(e),g.current=e},[d,t]);return 1===e.items.length&&"directory"===e.items[0].data.contentType?(0,r.jsx)(Q,{directoryItems:e.items,leadingPath:T+e.data.name,inheritsActive:t,dispatchKnownFolders:i,onItemSelected:o,selectedItemRef:d,getItemUrl:l,directoryNavigateOnClick:h}):(p?.(),(0,r.jsxs)(Z.L.Item,{ref:w,expanded:f,onExpandedChange:F,current:t,onSelect:$,id:`${e.data.path}-item`,containIntrinsicSize:t?void 0:"auto 2rem",children:[(0,r.jsx)(Z.L.LeadingVisual,{children:(0,r.jsx)(Z.L.DirectoryIcon,{})}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{ref:O,children:[T,e.data.name]}),b&&(0,r.jsx)(P.u,{"data-testid":`${e.data.name}-directory-item-tooltip`,id:`${e.data.name}-directory-item-tooltip`,contentRef:w,"aria-label":`${T}${e.data.name}`,open:!0,direction:"ne"})]}),(0,r.jsx)(Z.L.SubTree,{state:R?"loading":I?"error":"done",children:I?(0,r.jsx)(Z.L.ErrorDialog,{onRetry:v,onDismiss:S,children:"There was an error loading the folder contents."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Q,{directoryItems:j,dispatchKnownFolders:i,onItemSelected:o,selectedItemRef:d,getItemUrl:l,directoryNavigateOnClick:h}),N>0&&(0,r.jsx)(et,{message:`${N} entries not shown`})]})})]}))}let X=c.memo(Y);function J({directoryItems:e,leadingPath:t,inheritsActive:n,onItemSelected:a,dispatchKnownFolders:o,selectedItemRef:i,onRenderRow:l,getItemUrl:s,directoryNavigateOnClick:d=!0}){let{path:u}=(0,D.Br)(),m=(0,g.B)(),p=(0,W.s)(),h=c.useRef(p);return(0,r.jsx)(r.Fragment,{children:e.map(e=>{let c=u===e.data.path,p=c||u.startsWith(`${e.data.path}/`);return"directory"===e.data.contentType?(0,r.jsx)(X,{isActive:n||c,isAncestorOfActive:p,onItemSelected:a,leadingPath:t,directory:e,dispatchKnownFolders:o,getItemUrl:s,getFetchUrl:m.getItemUrl,selectedItemRef:p?i:void 0,navigate:h.current,onRenderRow:l,navigateOnClick:d},e.data.name):(0,r.jsx)(q,{onItemSelected:a,file:e,isActive:c,getItemUrl:s,selectedItemRef:c?i:void 0,navigate:h.current,onRenderRow:l},e.data.name)})})}let Q=c.memo(J);function ee(e){let{data:t,rootItems:n,setRootItems:a,fetchError:o,processingTime:i,loading:l,onRenderRow:s,getItemUrl:d}=e,{knownFolders:u,dispatchKnownFolders:m}=(0,c.useContext)(_),p=M();c.useEffect(()=>{if(l)return;let e=new Map,r=[];p.current||(e=new Map(u),r=n.slice());let{newRootItems:o,rootItemsUpdated:s}=H(t,e,r);(o.length>n.length||s||p.current)&&a(o),(e.size>u.size||p.current)&&m({type:"set",folders:e,processingTime:i}),p.current=!1},[t,l]);let h=c.useCallback(e=>{1===e.button&&e.preventDefault()},[]);return(0,r.jsx)(I.Z,{onMouseDown:h,sx:{px:3,pb:2},"data-testid":"repos-file-tree-container",children:l?(0,r.jsx)(I.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,r.jsx)(B.Z,{"aria-label":"Loading file tree"})}):(0,r.jsx)("nav",{"aria-label":"File Tree Navigation",children:(0,r.jsxs)(Z.L,{"aria-label":"Files",children:[o&&(0,r.jsx)(et,{message:"Some files could not be loaded."}),(0,r.jsx)(Q,{directoryItems:n,onItemSelected:e.onItemSelected,dispatchKnownFolders:m,selectedItemRef:e.selectedItemRef,onRenderRow:s,directoryNavigateOnClick:e.directoryNavigateOnClick,getItemUrl:d})]})})})}function et({message:e}){return(0,r.jsxs)(Z.L.Item,{id:"error-tree-row",children:[(0,r.jsx)(Z.L.LeadingVisual,{children:(0,r.jsx)(T.Z,{icon:s.AlertFillIcon,sx:{color:"attention.fg"}})}),(0,r.jsx)(I.Z,{sx:{color:"fg.muted"},children:e||"Couldn't load."})]})}try{K.displayName||(K.displayName="WrappedFileTreeRow")}catch{}try{q.displayName||(q.displayName="FileTreeRow")}catch{}try{Y.displayName||(Y.displayName="WrappedDirectoryTreeRow")}catch{}try{X.displayName||(X.displayName="DirectoryTreeRow")}catch{}try{J.displayName||(J.displayName="WrappedDirectoryContents")}catch{}try{Q.displayName||(Q.displayName="DirectoryContents")}catch{}try{ee.displayName||(ee.displayName="ReposFileTreeView")}catch{}try{et.displayName||(et.displayName="ErrorTreeRow")}catch{}var en=n(67142);function er({sx:e,onClick:t,textAreaId:n}){let{searchShortcut:o}=(0,i.bx)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(N.h,{unsafeDisableTooltip:!0,"aria-label":"Search this repository",icon:s.SearchIcon,"data-hotkey":o.hotkey,sx:{color:"fg.subtle",fontSize:14,fontWeight:"normal",flexShrink:0,...e},size:"medium",onClick:e=>{t?.(),(0,en.n)({retainScrollPosition:!0,returnTarget:e.target.closest("button")})}}),(0,r.jsx)(a.P,{buttonFocusId:n,buttonHotkey:o.hotkey,onButtonClick:()=>{let e=document.getElementById(n);t?.(),(0,en.n)({retainScrollPosition:!0,returnTarget:e??void 0})},onlyAddHotkeyScopeButton:!0})]})}try{er.displayName||(er.displayName="SearchButton")}catch{}let ea=C._G.xxxlarge;function eo({collapseTree:e,showTree:t,fileTree:n,treeToggleElement:a,treeToggleRef:o,onItemSelected:i,processingTime:d,searchBoxRef:u,repo:m,path:w,refInfo:D,isFilePath:P,foldersToFetch:L,id:W,onFindFilesShortcut:Z,textAreaId:B,getItemUrlOverride:z,showFindFile:A=!0,directoryNavigateOnClick:M=!0,showRefSelectorRow:G=!0}){let{openPanel:U}=(0,y.F)(),[V,K]=c.useState(L.length>0),[q,Y]=c.useState(!1),X=c.useRef([]),J=c.useRef(null),Q=c.useRef(!1),et=c.useRef(!1),en=c.useRef(null),{query:eo}=(0,x.aM)(),{codeCenterOption:es}=(0,j.OY)(),ed=c.useRef(U),[ec]=(0,l.D)(()=>!1,!0,[]),{getItemUrl:eu}=(0,g.B)();z&&(eu=z);let em=[],ep=new Map,eh=c.useRef(V);!eh.current&&n&&(em=H(n,ep,[]).newRootItems),eh.current=!0;let[ef,ex]=c.useReducer(ei,ep),[ey,eg]=c.useState(em);c.useEffect(()=>{t&&(!eo||window.innerWidth>=C._G.large)||(en.current=null)},[t,eo]),c.useEffect(()=>{U&&ed.current!==U&&window.innerWidth<ea&&e({setCookie:!1}),ed.current=U},[e,U]);let ew=c.useCallback(async e=>{let t=eu({contentType:"directory",path:e,name:e});try{let r=await (0,k.v5)(`${t}?noancestors=1`);if(r.ok){let t=await r.json(),a={items:t.payload.tree.items,totalCount:t.payload.tree.totalCount};n[e]=a}else Y(!0)}catch{Y(!0)}X.current.push(e),X.current.length===L.length&&K(!1)},[n,L.length,eu]);c.useEffect(()=>{if(L&&!Q.current)for(let e of L)ew(e);Q.current=!0},[ew,L,ef.size]);let eb=c.useCallback(e=>{t&&(!eo||window.innerWidth>=C._G.large)&&J.current&&e&&(0,R.z)(e,J.current,{endMargin:window.innerHeight/2,startMargin:window.innerHeight/2,behavior:"auto"})},[eo,t]),ev=c.useCallback(e=>{e&&et.current?et.current=!1:en.current!==e&&eb(e),en.current=e},[eb]),eC=c.useCallback(e=>{J.current=e,window.innerWidth>=ea&&eb(en.current)},[eb]),ej=c.useCallback(e=>{e&&eb(en.current)},[eb]),{screenSize:ek}=(0,C.eI)(),eR=!ec&&(U&&ek<ea||ek<C._G.xlarge)&&ek>=C._G.large,eI=c.useCallback(()=>{eR||i(),et.current=!0},[i,eR]),eS=t?{}:{display:"none"},eE=P?w.substring(0,w.lastIndexOf("/")):w,eN=(0,c.useMemo)(()=>({knownFolders:ef,dispatchKnownFolders:ex}),[ef]),eT=c.useMemo(()=>ec?null:(0,O.oD)(),[ec]),eF=c.useCallback(()=>{window.innerWidth>C._G.large&&window.innerWidth<C._G.xxxxlarge&&e({setCookie:!1})},[e]),e$=(0,r.jsxs)(I.Z,{id:W,sx:{maxHeight:"100%",height:"100%",display:"flex",flexDirection:"column","@media screen and (max-width: 768px)":ec?{display:"none"}:void 0,"@media screen and (min-width: 768px)":{maxHeight:"100vh",height:"100vh"}},children:[(0,r.jsxs)(I.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center",px:3,pb:2,pt:3},children:[(0,r.jsxs)(I.Z,{sx:{display:"flex",width:"100%",mb:3,alignItems:"center"},children:[t&&a,(0,r.jsx)(S.Z,{as:"h2",sx:{fontSize:2,ml:2},children:"Files"})]}),G&&(0,r.jsxs)(I.Z,{sx:{mx:4,display:"flex",width:"100%"},children:[(0,r.jsx)(I.Z,{sx:{flexGrow:1},children:(0,r.jsx)(f.S,{buttonClassName:"react-repos-tree-pane-ref-selector width-full ref-selector-class",allowResizing:!0})}),(0,r.jsxs)(I.Z,{sx:{ml:2,whiteSpace:"nowrap","&:hover button:not(:hover)":{borderLeftColor:"var(--button-default-borderColor-hover, var(--color-btn-hover-border))"}},children:[D.canEdit&&(0,r.jsx)(E.Z,{"aria-label":"Add file",direction:"s",children:(0,r.jsx)(N.h,{unsafeDisableTooltip:!0,"aria-label":"Add file",as:v.r,sx:{color:"fg.subtle",borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},icon:s.PlusIcon,to:(0,b.Qi)({repo:m,path:eE,commitish:D.name,action:"new"}),onClick:eI})}),(0,r.jsx)(er,{sx:D.canEdit?{borderTopLeftRadius:0,borderBottomLeftRadius:0}:void 0,onClick:eF,textAreaId:B})]})]})]}),D.currentOid&&A&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.default,{onItemSelected:i,searchBoxRef:u,sx:{ml:3,mr:3,mb:"12px","@media screen and (max-width: 768px)":ec?{display:"none"}:void 0}}),(0,r.jsx)(p,{inputRef:u,onFindFilesShortcut:Z,textAreaId:B})]}),(0,r.jsx)(el,{scrollingRef:J}),(0,r.jsxs)(I.Z,{ref:eC,sx:{flexGrow:1,maxHeight:"100% !important",overflowY:"auto","@media screen and (max-width: 768px)":ec?{display:"none"}:void 0,scrollbarGutter:"stable"},children:[ec?D.currentOid&&(0,r.jsx)("div",{className:eo?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,r.jsx)(ee,{data:n,rootItems:ey,selectedItemRef:ev,setRootItems:eg,onItemSelected:eI,processingTime:d,loading:V,fetchError:q,directoryNavigateOnClick:M,getItemUrl:eu})}):eT&&(0,r.jsx)(O.t0,{node:eT}),!D.currentOid&&!m.isEmpty&&(0,r.jsxs)(I.Z,{sx:{mt:2,mx:4,mb:"12px",fontSize:1,alignItems:"center",color:"danger.fg"},children:[(0,r.jsx)(T.Z,{icon:s.AlertFillIcon}),"\xa0Ref is invalid"]})]})]}),eO=eR||U?{"@media print, screen and (max-width: 1349px) and (min-width: 768px)":{display:"none"}}:{"@media print, screen and (max-width: 1011px) and (min-width: 768px)":{display:"none"}};return(0,r.jsxs)(_.Provider,{value:eN,children:[eT&&(0,r.jsx)(O.Nq,{node:eT,children:D.currentOid&&(0,r.jsx)("div",{className:eo?"react-tree-show-tree-items-on-large-screen":"react-tree-show-tree-items",children:(0,r.jsx)(ee,{data:n,directoryNavigateOnClick:M,rootItems:ey,selectedItemRef:ev,setRootItems:eg,onItemSelected:eI,processingTime:d,loading:V,fetchError:q,getItemUrl:eu})})}),!t&&es.enabled&&(0,r.jsx)(I.Z,{sx:{position:"absolute",p:3,display:"none","@media screen and (min-width: 1360px)":{display:"block"}},children:a}),(0,r.jsx)(F.jw.Pane,{position:"start",sticky:!0,sx:{minWidth:0,...eS,flexDirection:["column","column","inherit"],"@media screen and (min-width: 769px)":{height:"100vh",maxHeight:"100vh !important"},...eO},padding:"none",width:"large",resizable:!0,widthStorageKey:"codeView.tree-pane-width",divider:{regular:"line",narrow:"none"},children:t&&!eR&&(0,r.jsx)(I.Z,{className:ec?U?"react-tree-pane-contents-3-panel":"react-tree-pane-contents":void 0,children:(0,r.jsx)(r.Fragment,{children:e$})})}),t&&eR&&ed.current===U&&(0,r.jsx)($.ZP,{className:ec?U?"react-tree-pane-overlay-3-panel":"react-tree-pane-overlay":void 0,ref:ej,returnFocusRef:o,onClickOutside:eF,onEscape:eF,top:0,position:"fixed",sx:{...eS,width:"440px",height:"100vh",maxHeight:"100vh",borderTopLeftRadius:0,borderBottomLeftRadius:0},children:(0,r.jsx)(r.Fragment,{children:e$})})]})}function ei(e,t){switch(t.type){case"set":{let n=e?.size>0;return(0,w.qP)("file-tree",{"fetch-count":n?t.folders.size-e.size:t.folders.size,"file-count":t.folders.size,"nav-type":n?"soft":"hard","processing-time":t.processingTime}),t.folders}case"add":{let n=new Map([...e,...t.folders]);return(0,w.qP)("file-tree",{"fetch-count":t.folders.size,"file-count":n.size,"nav-type":"fetch","processing-time":t.processingTime}),n}default:throw Error(`Unknown action type: ${t.type}`)}}function el({scrollingRef:e}){let[t,n]=c.useState(e.current&&e.current.scrollTop>0);return c.useEffect(()=>{if(e.current){let t=e.current,r=()=>{t&&t.scrollTop>0?n(!0):n(!1)};return t.addEventListener("scroll",r),()=>{t.removeEventListener("scroll",r)}}},[e]),t?(0,r.jsx)(I.Z,{sx:{borderBottom:"1px solid",borderColor:"border.default",boxShadow:"0 3px 8px rgba(0, 0, 0, 0.3)"}}):null}try{eo.displayName||(eo.displayName="ReposFileTreePane")}catch{}try{el.displayName||(el.displayName="TreeBorder")}catch{}var es=n(8959),ed=n(65906),ec=n(73473),eu=n(84669),em=n(95921);function ep(e,t,n,a,o,i="fileTreeExpanded"){let{sendRepoClickEvent:l}=(0,m.a)(),s=(0,ec.x)(),d=(0,ed.ej)(i),p=!(void 0!==eu.n4),h=!s&&d&&"false"!==d.value||s&&n;void 0===h&&(h=!1);let f=(0,c.useRef)(null),x=(0,c.useRef)(null),{screenSize:y}=(0,C.eI)(),[g,w]=(0,c.useState)(h),b=(0,c.useRef)(h),v=(0,c.useRef)(!1),j=(0,c.useRef)(!1),k=(0,c.useCallback)(()=>!(t.current&&window.innerWidth>=ea||!t.current&&window.innerWidth>=C._G.xlarge),[t]);(0,em.b)(()=>{let e=k();e||(v.current=!1),w((0,es.$)()&&y<C._G.large&&!j.current||(!e||v.current)&&(s&&g||!s&&d?.value!=="false"))},[v,d?.value,y,t,k,s]),(0,em.b)(()=>{let e=!t.current&&window.innerWidth<C._G.xlarge,n=!t.current&&window.innerWidth>=C._G.xlarge;e&&b.current&&!(0,es.$)()&&g&&w(!1),n&&b.current&&!g&&w(!0)},[t,y]),(0,em.b)(()=>{let e=t.current&&window.innerWidth<ea,n=t.current&&window.innerWidth>=ea;e&&b.current&&!(0,es.$)()&&g&&w(!1),n&&b.current&&!g&&w(!0)},[t]);let R=(0,c.useCallback)(e=>{if(w(!0),k()&&(v.current=!0),e?.setCookie){o?.(!0),b.current=!0;let e=new Date(new Date().getTime()+2592e6).toUTCString();(0,ed.d8)(i,"true",e)}e?.focus==="toggleButton"?requestAnimationFrame(()=>f.current?.focus()):e?.focus==="search"&&requestAnimationFrame(()=>x.current?.focus())},[i,2592e6,k,o]),I=(0,c.useCallback)(e=>{if(w(!1),v.current=!1,j.current=!0,e?.setCookie){o?.(!1),b.current=!1;let e=new Date(new Date().getTime()+2592e6).toUTCString();(0,ed.d8)(i,"false",e)}e?.focus==="toggleButton"&&requestAnimationFrame(()=>f.current?.focus())},[i,2592e6,o]),E=(0,c.useCallback)(e=>e&&window.innerWidth>=ea||!t.current&&window.innerWidth>=C._G.xlarge,[t]),N=(0,c.useMemo)(()=>(0,r.jsx)(S.Z,{as:"h2",sx:{display:"flex",fontSize:1},children:(0,r.jsx)(u,{expanded:g,ariaControls:e,onToggleExpanded:()=>{l(g?"FILES_TREE.HIDE":"FILES_TREE.SHOW"),g?I({focus:"toggleButton",setCookie:E(t.current)}):R({focus:"toggleButton",setCookie:E(t.current)})},className:void 0!==d||g||p?void 0:"react-tree-toggle-button-with-indicator",ref:f,textAreaId:a})}),[g,e,d,p,a,l,I,E,t,R]);return{isTreeExpanded:g,expandTree:R,collapseTree:I,treeToggleElement:N,treeToggleRef:f,searchBoxRef:x}}},10491:(e,t,n)=>{n.d(t,{a:()=>a});var r=n(58081);function a({focusRowRef:e,mouseRowRef:t}){let[n,a]=r.useState(!1);return r.useEffect(()=>{if(e.current&&t.current){let n=()=>{let t=e.current?.querySelector(".PRIVATE_TreeView-item-content-text");t?.scrollWidth!==t?.offsetWidth&&a(!0)};e.current.onfocus=()=>{n()},e.current.onblur=()=>{a(!1)},t.current.onmouseenter=()=>{n()},t.current.onmouseleave=()=>{a(!1)}}},[e,t]),n}},78178:(e,t,n)=>{n.d(t,{P:()=>a});var r=n(48055);function a({buttonFocusId:e,buttonHotkey:t,onButtonClick:n,buttonTestLabel:a,onlyAddHotkeyScopeButton:o}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{hidden:!0,"data-testid":a||"","data-hotkey":t,onClick:n,"data-hotkey-scope":e}),!o&&(0,r.jsx)("button",{hidden:!0,"data-hotkey":t,onClick:n})]})}try{a.displayName||(a.displayName="DuplicateOnKeydownButton")}catch{}},65197:(e,t,n)=>{n.d(t,{V:()=>l});var r=n(48055),a=n(85529),o=n(65379),i=n(50919);let l=n(58081).forwardRef(({expanded:e,testid:t,ariaLabel:n,ariaControls:l,onToggleExpanded:s,sx:d,alignment:c,dataHotkey:u,className:m,tooltipDirection:p},h)=>(0,r.jsx)(o.Z,{"aria-label":n,id:`expand-button-${t}`,direction:p,children:(0,r.jsx)(i.h,{unsafeDisableTooltip:!0,ref:h,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":l,icon:e?"left"===c?a.SidebarExpandIcon:a.SidebarCollapseIcon:"left"===c?a.SidebarCollapseIcon:a.SidebarExpandIcon,sx:{color:"fg.muted",...d},"data-hotkey":u,onClick:e=>{s(e)},variant:"invisible",className:m})}));l.displayName="ExpandButton"},80580:(e,t,n)=>{n.d(t,{F:()=>m,a:()=>u});var r=n(48055),a=n(48891),o=n(73473),i=n(83376),l=n(10351),s=n(58081);let d=(0,i.Z)("localStorage"),c=(0,s.createContext)({openPanel:void 0,setOpenPanel:()=>void 0});function u({children:e,payload:t,openPanelRef:n}){let i="blame"in t,u=(0,a.g6)(t),m=(0,o.x)(),p=(0,s.useRef)(),[h,f]=(0,s.useState)(()=>{let e=d.getItem("codeNavOpen");if(!m&&""!==e&&null!==e||m&&t.symbolsExpanded)return"codeNav"}),x=(i||u)&&"codeNav"===h?void 0:h;s.useEffect(()=>{n.current=x},[x,n]);let y=(0,s.useCallback)((e,t)=>{f(n=>(n&&p.current&&p.current.focus(),p.current=t,i||u&&"codeNav"===e?void 0:e))},[i,u]);!function(e){let{screenSize:t}=(0,l.eI)(),n=(0,s.useRef)(t);(0,s.useEffect)(()=>{let r=n.current>=l._G.large,a=n.current===t;t<l._G.large&&(r||a)&&e(void 0),n.current=t},[t,e])}(y);let g=(0,s.useMemo)(()=>({openPanel:x,setOpenPanel:y}),[x,y]);return(0,r.jsx)(c.Provider,{value:g,children:e})}function m(){return(0,s.useContext)(c)}try{c.displayName||(c.displayName="OpenPanelContext")}catch{}try{u.displayName||(u.displayName="OpenPanelProvider")}catch{}},92667:(e,t,n)=>{n.d(t,{g:()=>r});function r({path:e,Component:t,shouldNavigateOnError:n,transitionType:r,children:a}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let n=`${e.pathname}${e.search}`;t=await window.fetch(n,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom"}})}catch(e){return{type:n?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:n?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:n?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:r,children:a}}},33760:(e,t,n)=>{n.d(t,{Kl:()=>p,OY:()=>f,SM:()=>s});var r=n(48055),a=n(83376),o=n(58081);let i=(0,a.Z)("localStorage"),l="codeView.codeFolding",s="codeView.codeWrapping",d="codeView.centerView",c="codeView.openSymbolsOnClick",u=new Map([[l,"Show code folding buttons"],[s,"Wrap lines"],[d,"Center content"],[c,"Open symbols on click"]]),m=(0,o.createContext)({codeFoldingOption:{},codeWrappingOption:{},codeCenterOption:{},openSymbolsOption:{}}),p=({children:e})=>{let t=h(l,!0),n=h(s,!1),a=h(d,!1),i=h(c,!0),u=(0,o.useMemo)(()=>({codeFoldingOption:t,codeWrappingOption:n,codeCenterOption:a,openSymbolsOption:i}),[t,n,a,i]);return(0,r.jsx)(m.Provider,{value:u,children:e})};function h(e,t){let n=i.getItem(e),[r,a]=(0,o.useState)(()=>n?"true"===n:t),l=u.get(e)||"";return{name:e,enabled:r,setEnabled:a,label:l}}function f(){return(0,o.useContext)(m)}try{m.displayName||(m.displayName="CodeViewOptionsContext")}catch{}try{p.displayName||(p.displayName="CodeViewOptionsProvider")}catch{}}}]);
//# sourceMappingURL=ui_packages_repos-file-tree-view_repos-file-tree-view_ts-ui_packages_react-core_JsonRoute_tsx-a045d11a9122.js.map